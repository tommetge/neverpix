// Modernizr 2.6.2 (Custom Build)
// Build: Build: http://modernizr.com/download/#-fontface-backgroundsize-borderradius-boxshadow-multiplebgs-opacity-rgba-cssanimations-csscolumns-generatedcontent-cssgradients-csstransforms-csstransforms3d-csstransitions-draganddrop-hashchange-history-video-input-touch-mq-cssclasses-addtest-prefixed-teststyles-testprop-testallprops-hasevent-prefixes-domprefixes-file_api-img_webp-url_data_uri
// Dual-licensed under MIT & BSD
;
window.Modernizr = function(a, b, c) {
  function C(a) {
    j.cssText = a
  }

  function D(a, b) {
    return C(n.join(a + ";") + (b || ""))
  }

  function E(a, b) {
    return typeof a === b
  }

  function F(a, b) {
    return !!~("" + a).indexOf(b)
  }

  function G(a, b) {
    for (var d in a) {
      var e = a[d];
      if (!F(e, "-") && j[e] !== c) return b == "pfx" ? e : !0
    }
    return !1
  }

  function H(a, b, d) {
    for (var e in a) {
      var f = b[a[e]];
      if (f !== c) return d === !1 ? a[e] : E(f, "function") ? f.bind(d || b) : f
    }
    return !1
  }

  function I(a, b, c) {
    var d = a.charAt(0).toUpperCase() + a.slice(1),
      e = (a + " " + p.join(d + " ") + d).split(" ");
    return E(b, "string") || E(b, "undefined") ? G(e, b) : (e = (a + " " + q.join(d + " ") + d).split(" "), H(e, b, c))
  }

  function J() {
    e.input = function(c) {
      for (var d = 0, e = c.length; d < e; d++) t[c[d]] = c[d] in k;
      return t.list && (t.list = !! b.createElement("datalist") && !! a.HTMLDataListElement), t
    }("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "))
  }
  var d = "2.6.2",
    e = {}, f = !0,
    g = b.documentElement,
    h = "modernizr",
    i = b.createElement(h),
    j = i.style,
    k = b.createElement("input"),
    l = ":)",
    m = {}.toString,
    n = " -webkit- -moz- -o- -ms- ".split(" "),
    o = "Webkit Moz O ms",
    p = o.split(" "),
    q = o.toLowerCase().split(" "),
    r = {}, s = {}, t = {}, u = [],
    v = u.slice,
    w, x = function(a, c, d, e) {
      var f, i, j, k, l = b.createElement("div"),
        m = b.body,
        n = m || b.createElement("body");
      if (parseInt(d, 10))
        while (d--) j = b.createElement("div"), j.id = e ? e[d] : h + (d + 1), l.appendChild(j);
      return f = ["&#173;", '<style id="s', h, '">', a, "</style>"].join(""), l.id = h, (m ? l : n).innerHTML += f, n.appendChild(l), m || (n.style.background = "", n.style.overflow = "hidden", k = g.style.overflow, g.style.overflow = "hidden", g.appendChild(n)), i = c(l, a), m ? l.parentNode.removeChild(l) : (n.parentNode.removeChild(n), g.style.overflow = k), !! i
    }, y = function(b) {
      var c = a.matchMedia || a.msMatchMedia;
      if (c) return c(b).matches;
      var d;
      return x("@media " + b + " { #" + h + " { position: absolute; } }", function(b) {
        d = (a.getComputedStyle ? getComputedStyle(b, null) : b.currentStyle)["position"] == "absolute"
      }), d
    }, z = function() {
      function d(d, e) {
        e = e || b.createElement(a[d] || "div"), d = "on" + d;
        var f = d in e;
        return f || (e.setAttribute || (e = b.createElement("div")), e.setAttribute && e.removeAttribute && (e.setAttribute(d, ""), f = E(e[d], "function"), E(e[d], "undefined") || (e[d] = c), e.removeAttribute(d))), e = null, f
      }
      var a = {
        select: "input",
        change: "input",
        submit: "form",
        reset: "form",
        error: "img",
        load: "img",
        abort: "img"
      };
      return d
    }(),
    A = {}.hasOwnProperty,
    B;
  !E(A, "undefined") && !E(A.call, "undefined") ? B = function(a, b) {
    return A.call(a, b)
  } : B = function(a, b) {
    return b in a && E(a.constructor.prototype[b], "undefined")
  }, Function.prototype.bind || (Function.prototype.bind = function(b) {
    var c = this;
    if (typeof c != "function") throw new TypeError;
    var d = v.call(arguments, 1),
      e = function() {
        if (this instanceof e) {
          var a = function() {};
          a.prototype = c.prototype;
          var f = new a,
            g = c.apply(f, d.concat(v.call(arguments)));
          return Object(g) === g ? g : f
        }
        return c.apply(b, d.concat(v.call(arguments)))
      };
    return e
  }), r.touch = function() {
    var c;
    return "ontouchstart" in a || a.DocumentTouch && b instanceof DocumentTouch ? c = !0 : x(["@media (", n.join("touch-enabled),("), h, ")", "{#modernizr{top:9px;position:absolute}}"].join(""), function(a) {
      c = a.offsetTop === 9
    }), c
  }, r.hashchange = function() {
    return z("hashchange", a) && (b.documentMode === c || b.documentMode > 7)
  }, r.history = function() {
    return !!a.history && !! history.pushState
  }, r.draganddrop = function() {
    var a = b.createElement("div");
    return "draggable" in a || "ondragstart" in a && "ondrop" in a
  }, r.rgba = function() {
    return C("background-color:rgba(150,255,150,.5)"), F(j.backgroundColor, "rgba")
  }, r.multiplebgs = function() {
    return C("background:url(https://),url(https://),red url(https://)"), /(url\s*\(.*?){3}/.test(j.background)
  }, r.backgroundsize = function() {
    return I("backgroundSize")
  }, r.borderradius = function() {
    return I("borderRadius")
  }, r.boxshadow = function() {
    return I("boxShadow")
  }, r.opacity = function() {
    return D("opacity:.55"), /^0.55$/.test(j.opacity)
  }, r.cssanimations = function() {
    return I("animationName")
  }, r.csscolumns = function() {
    return I("columnCount")
  }, r.cssgradients = function() {
    var a = "background-image:",
      b = "gradient(linear,left top,right bottom,from(#9f9),to(white));",
      c = "linear-gradient(left top,#9f9, white);";
    return C((a + "-webkit- ".split(" ").join(b + a) + n.join(c + a)).slice(0, -a.length)), F(j.backgroundImage, "gradient")
  }, r.csstransforms = function() {
    return !!I("transform")
  }, r.csstransforms3d = function() {
    var a = !! I("perspective");
    return a && "webkitPerspective" in g.style && x("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}", function(b, c) {
      a = b.offsetLeft === 9 && b.offsetHeight === 3
    }), a
  }, r.csstransitions = function() {
    return I("transition")
  }, r.fontface = function() {
    var a;
    return x('@font-face {font-family:"font";src:url("https://")}', function(c, d) {
      var e = b.getElementById("smodernizr"),
        f = e.sheet || e.styleSheet,
        g = f ? f.cssRules && f.cssRules[0] ? f.cssRules[0].cssText : f.cssText || "" : "";
      a = /src/i.test(g) && g.indexOf(d.split(" ")[0]) === 0
    }), a
  }, r.generatedcontent = function() {
    var a;
    return x(["#", h, "{font:0/0 a}#", h, ':after{content:"', l, '";visibility:hidden;font:3px/1 a}'].join(""), function(b) {
      a = b.offsetHeight >= 3
    }), a
  }, r.video = function() {
    var a = b.createElement("video"),
      c = !1;
    try {
      if (c = !! a.canPlayType) c = new Boolean(c), c.ogg = a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/, ""), c.h264 = a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/, ""), c.webm = a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/, "")
    } catch (d) {}
    return c
  };
  for (var K in r) B(r, K) && (w = K.toLowerCase(), e[w] = r[K](), u.push((e[w] ? "" : "no-") + w));
  return e.input || J(), e.addTest = function(a, b) {
    if (typeof a == "object")
      for (var d in a) B(a, d) && e.addTest(d, a[d]);
    else {
      a = a.toLowerCase();
      if (e[a] !== c) return e;
      b = typeof b == "function" ? b() : b, typeof f != "undefined" && f && (g.className += " " + (b ? "" : "no-") + a), e[a] = b
    }
    return e
  }, C(""), i = k = null, e._version = d, e._prefixes = n, e._domPrefixes = q, e._cssomPrefixes = p, e.mq = y, e.hasEvent = z, e.testProp = function(a) {
    return G([a])
  }, e.testAllProps = I, e.testStyles = x, e.prefixed = function(a, b, c) {
    return b ? I(a, b, c) : I(a, "pfx")
  }, g.className = g.className.replace(/(^|\s)no-js(\s|$)/, "$1$2") + (f ? " js " + u.join(" ") : ""), e
}(this, this.document), Modernizr.addTest("filereader", function() {
  return !!(window.File && window.FileList && window.FileReader)
}),
function() {
  var a = new Image;
  a.onerror = function() {
    Modernizr.addTest("webp", !1)
  }, a.onload = function() {
    Modernizr.addTest("webp", function() {
      return a.width == 1
    })
  }, a.src = "data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAAAUAgCdASoBAAEAL/3+/3+CAB/AAAFzrNsAAP5QAAAAAA=="
}(),
function() {
  var a = new Image;
  a.onerror = function() {
    Modernizr.addTest("datauri", function() {
      return !1
    })
  }, a.onload = function() {
    Modernizr.addTest("datauri", function() {
      return a.width == 1 && a.height == 1
    })
  }, a.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="
}();

// Underscore.js 1.4.4
// http://underscorejs.org/
// (c) 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.; MIT license
(function() {
  var n = this,
    t = n._,
    r = {}, e = Array.prototype,
    u = Object.prototype,
    i = Function.prototype,
    a = e.push,
    o = e.slice,
    c = e.concat,
    l = u.toString,
    f = u.hasOwnProperty,
    s = e.forEach,
    p = e.map,
    h = e.reduce,
    v = e.reduceRight,
    d = e.filter,
    g = e.every,
    m = e.some,
    y = e.indexOf,
    b = e.lastIndexOf,
    x = Array.isArray,
    _ = Object.keys,
    j = i.bind,
    w = function(n) {
      return n instanceof w ? n : this instanceof w ? (this._wrapped = n, void 0) : new w(n)
    };
  "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = w), exports._ = w) : n._ = w, w.VERSION = "1.4.4";
  var A = w.each = w.forEach = function(n, t, e) {
    if (null != n)
      if (s && n.forEach === s) n.forEach(t, e);
      else
    if (n.length === +n.length) {
      for (var u = 0, i = n.length; i > u; u++)
        if (t.call(e, n[u], u, n) === r) return
    } else
      for (var a in n)
        if (w.has(n, a) && t.call(e, n[a], a, n) === r) return
  };
  w.map = w.collect = function(n, t, r) {
    var e = [];
    return null == n ? e : p && n.map === p ? n.map(t, r) : (A(n, function(n, u, i) {
      e[e.length] = t.call(r, n, u, i)
    }), e)
  };
  var O = "Reduce of empty array with no initial value";
  w.reduce = w.foldl = w.inject = function(n, t, r, e) {
    var u = arguments.length > 2;
    if (null == n && (n = []), h && n.reduce === h) return e && (t = w.bind(t, e)), u ? n.reduce(t, r) : n.reduce(t);
    if (A(n, function(n, i, a) {
      u ? r = t.call(e, r, n, i, a) : (r = n, u = !0)
    }), !u) throw new TypeError(O);
    return r
  }, w.reduceRight = w.foldr = function(n, t, r, e) {
    var u = arguments.length > 2;
    if (null == n && (n = []), v && n.reduceRight === v) return e && (t = w.bind(t, e)), u ? n.reduceRight(t, r) : n.reduceRight(t);
    var i = n.length;
    if (i !== +i) {
      var a = w.keys(n);
      i = a.length
    }
    if (A(n, function(o, c, l) {
      c = a ? a[--i] : --i, u ? r = t.call(e, r, n[c], c, l) : (r = n[c], u = !0)
    }), !u) throw new TypeError(O);
    return r
  }, w.find = w.detect = function(n, t, r) {
    var e;
    return E(n, function(n, u, i) {
      return t.call(r, n, u, i) ? (e = n, !0) : void 0
    }), e
  }, w.filter = w.select = function(n, t, r) {
    var e = [];
    return null == n ? e : d && n.filter === d ? n.filter(t, r) : (A(n, function(n, u, i) {
      t.call(r, n, u, i) && (e[e.length] = n)
    }), e)
  }, w.reject = function(n, t, r) {
    return w.filter(n, function(n, e, u) {
      return !t.call(r, n, e, u)
    }, r)
  }, w.every = w.all = function(n, t, e) {
    t || (t = w.identity);
    var u = !0;
    return null == n ? u : g && n.every === g ? n.every(t, e) : (A(n, function(n, i, a) {
      return (u = u && t.call(e, n, i, a)) ? void 0 : r
    }), !! u)
  };
  var E = w.some = w.any = function(n, t, e) {
    t || (t = w.identity);
    var u = !1;
    return null == n ? u : m && n.some === m ? n.some(t, e) : (A(n, function(n, i, a) {
      return u || (u = t.call(e, n, i, a)) ? r : void 0
    }), !! u)
  };
  w.contains = w.include = function(n, t) {
    return null == n ? !1 : y && n.indexOf === y ? n.indexOf(t) != -1 : E(n, function(n) {
      return n === t
    })
  }, w.invoke = function(n, t) {
    var r = o.call(arguments, 2),
      e = w.isFunction(t);
    return w.map(n, function(n) {
      return (e ? t : n[t]).apply(n, r)
    })
  }, w.pluck = function(n, t) {
    return w.map(n, function(n) {
      return n[t]
    })
  }, w.where = function(n, t, r) {
    return w.isEmpty(t) ? r ? null : [] : w[r ? "find" : "filter"](n, function(n) {
      for (var r in t)
        if (t[r] !== n[r]) return !1;
      return !0
    })
  }, w.findWhere = function(n, t) {
    return w.where(n, t, !0)
  }, w.max = function(n, t, r) {
    if (!t && w.isArray(n) && n[0] === +n[0] && 65535 > n.length) return Math.max.apply(Math, n);
    if (!t && w.isEmpty(n)) return -1 / 0;
    var e = {
      computed: -1 / 0,
      value: -1 / 0
    };
    return A(n, function(n, u, i) {
      var a = t ? t.call(r, n, u, i) : n;
      a >= e.computed && (e = {
        value: n,
        computed: a
      })
    }), e.value
  }, w.min = function(n, t, r) {
    if (!t && w.isArray(n) && n[0] === +n[0] && 65535 > n.length) return Math.min.apply(Math, n);
    if (!t && w.isEmpty(n)) return 1 / 0;
    var e = {
      computed: 1 / 0,
      value: 1 / 0
    };
    return A(n, function(n, u, i) {
      var a = t ? t.call(r, n, u, i) : n;
      e.computed > a && (e = {
        value: n,
        computed: a
      })
    }), e.value
  }, w.shuffle = function(n) {
    var t, r = 0,
      e = [];
    return A(n, function(n) {
      t = w.random(r++), e[r - 1] = e[t], e[t] = n
    }), e
  };
  var k = function(n) {
    return w.isFunction(n) ? n : function(t) {
      return t[n]
    }
  };
  w.sortBy = function(n, t, r) {
    var e = k(t);
    return w.pluck(w.map(n, function(n, t, u) {
      return {
        value: n,
        index: t,
        criteria: e.call(r, n, t, u)
      }
    }).sort(function(n, t) {
      var r = n.criteria,
        e = t.criteria;
      if (r !== e) {
        if (r > e || r === void 0) return 1;
        if (e > r || e === void 0) return -1
      }
      return n.index < t.index ? -1 : 1
    }), "value")
  };
  var F = function(n, t, r, e) {
    var u = {}, i = k(t || w.identity);
    return A(n, function(t, a) {
      var o = i.call(r, t, a, n);
      e(u, o, t)
    }), u
  };
  w.groupBy = function(n, t, r) {
    return F(n, t, r, function(n, t, r) {
      (w.has(n, t) ? n[t] : n[t] = []).push(r)
    })
  }, w.countBy = function(n, t, r) {
    return F(n, t, r, function(n, t) {
      w.has(n, t) || (n[t] = 0), n[t]++
    })
  }, w.sortedIndex = function(n, t, r, e) {
    r = null == r ? w.identity : k(r);
    for (var u = r.call(e, t), i = 0, a = n.length; a > i;) {
      var o = i + a >>> 1;
      u > r.call(e, n[o]) ? i = o + 1 : a = o
    }
    return i
  }, w.toArray = function(n) {
    return n ? w.isArray(n) ? o.call(n) : n.length === +n.length ? w.map(n, w.identity) : w.values(n) : []
  }, w.size = function(n) {
    return null == n ? 0 : n.length === +n.length ? n.length : w.keys(n).length
  }, w.first = w.head = w.take = function(n, t, r) {
    return null == n ? void 0 : null == t || r ? n[0] : o.call(n, 0, t)
  }, w.initial = function(n, t, r) {
    return o.call(n, 0, n.length - (null == t || r ? 1 : t))
  }, w.last = function(n, t, r) {
    return null == n ? void 0 : null == t || r ? n[n.length - 1] : o.call(n, Math.max(n.length - t, 0))
  }, w.rest = w.tail = w.drop = function(n, t, r) {
    return o.call(n, null == t || r ? 1 : t)
  }, w.compact = function(n) {
    return w.filter(n, w.identity)
  };
  var R = function(n, t, r) {
    return A(n, function(n) {
      w.isArray(n) ? t ? a.apply(r, n) : R(n, t, r) : r.push(n)
    }), r
  };
  w.flatten = function(n, t) {
    return R(n, t, [])
  }, w.without = function(n) {
    return w.difference(n, o.call(arguments, 1))
  }, w.uniq = w.unique = function(n, t, r, e) {
    w.isFunction(t) && (e = r, r = t, t = !1);
    var u = r ? w.map(n, r, e) : n,
      i = [],
      a = [];
    return A(u, function(r, e) {
      (t ? e && a[a.length - 1] === r : w.contains(a, r)) || (a.push(r), i.push(n[e]))
    }), i
  }, w.union = function() {
    return w.uniq(c.apply(e, arguments))
  }, w.intersection = function(n) {
    var t = o.call(arguments, 1);
    return w.filter(w.uniq(n), function(n) {
      return w.every(t, function(t) {
        return w.indexOf(t, n) >= 0
      })
    })
  }, w.difference = function(n) {
    var t = c.apply(e, o.call(arguments, 1));
    return w.filter(n, function(n) {
      return !w.contains(t, n)
    })
  }, w.zip = function() {
    for (var n = o.call(arguments), t = w.max(w.pluck(n, "length")), r = Array(t), e = 0; t > e; e++) r[e] = w.pluck(n, "" + e);
    return r
  }, w.object = function(n, t) {
    if (null == n) return {};
    for (var r = {}, e = 0, u = n.length; u > e; e++) t ? r[n[e]] = t[e] : r[n[e][0]] = n[e][1];
    return r
  }, w.indexOf = function(n, t, r) {
    if (null == n) return -1;
    var e = 0,
      u = n.length;
    if (r) {
      if ("number" != typeof r) return e = w.sortedIndex(n, t), n[e] === t ? e : -1;
      e = 0 > r ? Math.max(0, u + r) : r
    }
    if (y && n.indexOf === y) return n.indexOf(t, r);
    for (; u > e; e++)
      if (n[e] === t) return e;
    return -1
  }, w.lastIndexOf = function(n, t, r) {
    if (null == n) return -1;
    var e = null != r;
    if (b && n.lastIndexOf === b) return e ? n.lastIndexOf(t, r) : n.lastIndexOf(t);
    for (var u = e ? r : n.length; u--;)
      if (n[u] === t) return u;
    return -1
  }, w.range = function(n, t, r) {
    1 >= arguments.length && (t = n || 0, n = 0), r = arguments[2] || 1;
    for (var e = Math.max(Math.ceil((t - n) / r), 0), u = 0, i = Array(e); e > u;) i[u++] = n, n += r;
    return i
  }, w.bind = function(n, t) {
    if (n.bind === j && j) return j.apply(n, o.call(arguments, 1));
    var r = o.call(arguments, 2);
    return function() {
      return n.apply(t, r.concat(o.call(arguments)))
    }
  }, w.partial = function(n) {
    var t = o.call(arguments, 1);
    return function() {
      return n.apply(this, t.concat(o.call(arguments)))
    }
  }, w.bindAll = function(n) {
    var t = o.call(arguments, 1);
    return 0 === t.length && (t = w.functions(n)), A(t, function(t) {
      n[t] = w.bind(n[t], n)
    }), n
  }, w.memoize = function(n, t) {
    var r = {};
    return t || (t = w.identity),
    function() {
      var e = t.apply(this, arguments);
      return w.has(r, e) ? r[e] : r[e] = n.apply(this, arguments)
    }
  }, w.delay = function(n, t) {
    var r = o.call(arguments, 2);
    return setTimeout(function() {
      return n.apply(null, r)
    }, t)
  }, w.defer = function(n) {
    return w.delay.apply(w, [n, 1].concat(o.call(arguments, 1)))
  }, w.throttle = function(n, t) {
    var r, e, u, i, a = 0,
      o = function() {
        a = new Date, u = null, i = n.apply(r, e)
      };
    return function() {
      var c = new Date,
        l = t - (c - a);
      return r = this, e = arguments, 0 >= l ? (clearTimeout(u), u = null, a = c, i = n.apply(r, e)) : u || (u = setTimeout(o, l)), i
    }
  }, w.debounce = function(n, t, r) {
    var e, u;
    return function() {
      var i = this,
        a = arguments,
        o = function() {
          e = null, r || (u = n.apply(i, a))
        }, c = r && !e;
      return clearTimeout(e), e = setTimeout(o, t), c && (u = n.apply(i, a)), u
    }
  }, w.once = function(n) {
    var t, r = !1;
    return function() {
      return r ? t : (r = !0, t = n.apply(this, arguments), n = null, t)
    }
  }, w.wrap = function(n, t) {
    return function() {
      var r = [n];
      return a.apply(r, arguments), t.apply(this, r)
    }
  }, w.compose = function() {
    var n = arguments;
    return function() {
      for (var t = arguments, r = n.length - 1; r >= 0; r--) t = [n[r].apply(this, t)];
      return t[0]
    }
  }, w.after = function(n, t) {
    return 0 >= n ? t() : function() {
      return 1 > --n ? t.apply(this, arguments) : void 0
    }
  }, w.keys = _ || function(n) {
    if (n !== Object(n)) throw new TypeError("Invalid object");
    var t = [];
    for (var r in n) w.has(n, r) && (t[t.length] = r);
    return t
  }, w.values = function(n) {
    var t = [];
    for (var r in n) w.has(n, r) && t.push(n[r]);
    return t
  }, w.pairs = function(n) {
    var t = [];
    for (var r in n) w.has(n, r) && t.push([r, n[r]]);
    return t
  }, w.invert = function(n) {
    var t = {};
    for (var r in n) w.has(n, r) && (t[n[r]] = r);
    return t
  }, w.functions = w.methods = function(n) {
    var t = [];
    for (var r in n) w.isFunction(n[r]) && t.push(r);
    return t.sort()
  }, w.extend = function(n) {
    return A(o.call(arguments, 1), function(t) {
      if (t)
        for (var r in t) n[r] = t[r]
    }), n
  }, w.pick = function(n) {
    var t = {}, r = c.apply(e, o.call(arguments, 1));
    return A(r, function(r) {
      r in n && (t[r] = n[r])
    }), t
  }, w.omit = function(n) {
    var t = {}, r = c.apply(e, o.call(arguments, 1));
    for (var u in n) w.contains(r, u) || (t[u] = n[u]);
    return t
  }, w.defaults = function(n) {
    return A(o.call(arguments, 1), function(t) {
      if (t)
        for (var r in t) null == n[r] && (n[r] = t[r])
    }), n
  }, w.clone = function(n) {
    return w.isObject(n) ? w.isArray(n) ? n.slice() : w.extend({}, n) : n
  }, w.tap = function(n, t) {
    return t(n), n
  };
  var I = function(n, t, r, e) {
    if (n === t) return 0 !== n || 1 / n == 1 / t;
    if (null == n || null == t) return n === t;
    n instanceof w && (n = n._wrapped), t instanceof w && (t = t._wrapped);
    var u = l.call(n);
    if (u != l.call(t)) return !1;
    switch (u) {
      case "[object String]":
        return n == t + "";
      case "[object Number]":
        return n != +n ? t != +t : 0 == n ? 1 / n == 1 / t : n == +t;
      case "[object Date]":
      case "[object Boolean]":
        return +n == +t;
      case "[object RegExp]":
        return n.source == t.source && n.global == t.global && n.multiline == t.multiline && n.ignoreCase == t.ignoreCase
    }
    if ("object" != typeof n || "object" != typeof t) return !1;
    for (var i = r.length; i--;)
      if (r[i] == n) return e[i] == t;
    r.push(n), e.push(t);
    var a = 0,
      o = !0;
    if ("[object Array]" == u) {
      if (a = n.length, o = a == t.length)
        for (; a-- && (o = I(n[a], t[a], r, e)););
    } else {
      var c = n.constructor,
        f = t.constructor;
      if (c !== f && !(w.isFunction(c) && c instanceof c && w.isFunction(f) && f instanceof f)) return !1;
      for (var s in n)
        if (w.has(n, s) && (a++, !(o = w.has(t, s) && I(n[s], t[s], r, e)))) break;
      if (o) {
        for (s in t)
          if (w.has(t, s) && !a--) break;
        o = !a
      }
    }
    return r.pop(), e.pop(), o
  };
  w.isEqual = function(n, t) {
    return I(n, t, [], [])
  }, w.isEmpty = function(n) {
    if (null == n) return !0;
    if (w.isArray(n) || w.isString(n)) return 0 === n.length;
    for (var t in n)
      if (w.has(n, t)) return !1;
    return !0
  }, w.isElement = function(n) {
    return !(!n || 1 !== n.nodeType)
  }, w.isArray = x || function(n) {
    return "[object Array]" == l.call(n)
  }, w.isObject = function(n) {
    return n === Object(n)
  }, A(["Arguments", "Function", "String", "Number", "Date", "RegExp"], function(n) {
    w["is" + n] = function(t) {
      return l.call(t) == "[object " + n + "]"
    }
  }), w.isArguments(arguments) || (w.isArguments = function(n) {
    return !(!n || !w.has(n, "callee"))
  }), "function" != typeof / . / && (w.isFunction = function(n) {
    return "function" == typeof n
  }), w.isFinite = function(n) {
    return isFinite(n) && !isNaN(parseFloat(n))
  }, w.isNaN = function(n) {
    return w.isNumber(n) && n != +n
  }, w.isBoolean = function(n) {
    return n === !0 || n === !1 || "[object Boolean]" == l.call(n)
  }, w.isNull = function(n) {
    return null === n
  }, w.isUndefined = function(n) {
    return n === void 0
  }, w.has = function(n, t) {
    return f.call(n, t)
  }, w.noConflict = function() {
    return n._ = t, this
  }, w.identity = function(n) {
    return n
  }, w.times = function(n, t, r) {
    for (var e = Array(n), u = 0; n > u; u++) e[u] = t.call(r, u);
    return e
  }, w.random = function(n, t) {
    return null == t && (t = n, n = 0), n + Math.floor(Math.random() * (t - n + 1))
  };
  var M = {
    escape: {
      "&": "&amp;",
      "<": "&lt;",
      ">": "&gt;",
      '"': "&quot;",
      "'": "&#x27;",
      "/": "&#x2F;"
    }
  };
  M.unescape = w.invert(M.escape);
  var S = {
    escape: RegExp("[" + w.keys(M.escape).join("") + "]", "g"),
    unescape: RegExp("(" + w.keys(M.unescape).join("|") + ")", "g")
  };
  w.each(["escape", "unescape"], function(n) {
    w[n] = function(t) {
      return null == t ? "" : ("" + t).replace(S[n], function(t) {
        return M[n][t]
      })
    }
  }), w.result = function(n, t) {
    if (null == n) return null;
    var r = n[t];
    return w.isFunction(r) ? r.call(n) : r
  }, w.mixin = function(n) {
    A(w.functions(n), function(t) {
      var r = w[t] = n[t];
      w.prototype[t] = function() {
        var n = [this._wrapped];
        return a.apply(n, arguments), D.call(this, r.apply(w, n))
      }
    })
  };
  var N = 0;
  w.uniqueId = function(n) {
    var t = ++N + "";
    return n ? n + t : t
  }, w.templateSettings = {
    evaluate: /<%([\s\S]+?)%>/g,
    interpolate: /<%=([\s\S]+?)%>/g,
    escape: /<%-([\s\S]+?)%>/g
  };
  var T = /(.)^/,
    q = {
      "'": "'",
      "\\": "\\",
      "\r": "r",
      "\n": "n",
      "  ": "t",
      "\u2028": "u2028",
      "\u2029": "u2029"
    }, B = /\\|'|\r|\n|\t|\u2028|\u2029/g;
  w.template = function(n, t, r) {
    var e;
    r = w.defaults({}, r, w.templateSettings);
    var u = RegExp([(r.escape || T).source, (r.interpolate || T).source, (r.evaluate || T).source].join("|") + "|$", "g"),
      i = 0,
      a = "__p+='";
    n.replace(u, function(t, r, e, u, o) {
      return a += n.slice(i, o).replace(B, function(n) {
        return "\\" + q[n]
      }), r && (a += "'+\n((__t=(" + r + "))==null?'':_.escape(__t))+\n'"), e && (a += "'+\n((__t=(" + e + "))==null?'':__t)+\n'"), u && (a += "';\n" + u + "\n__p+='"), i = o + t.length, t
    }), a += "';\n", r.variable || (a = "with(obj||{}){\n" + a + "}\n"), a = "var __t,__p='',__j=Array.prototype.join," + "print=function(){__p+=__j.call(arguments,'');};\n" + a + "return __p;\n";
    try {
      e = Function(r.variable || "obj", "_", a)
    } catch (o) {
      throw o.source = a, o
    }
    if (t) return e(t, w);
    var c = function(n) {
      return e.call(this, n, w)
    };
    return c.source = "function(" + (r.variable || "obj") + "){\n" + a + "}", c
  }, w.chain = function(n) {
    return w(n).chain()
  };
  var D = function(n) {
    return this._chain ? w(n).chain() : n
  };
  w.mixin(w), A(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function(n) {
    var t = e[n];
    w.prototype[n] = function() {
      var r = this._wrapped;
      return t.apply(r, arguments), "shift" != n && "splice" != n || 0 !== r.length || delete r[0], D.call(this, r)
    }
  }), A(["concat", "join", "slice"], function(n) {
    var t = e[n];
    w.prototype[n] = function() {
      return D.call(this, t.apply(this._wrapped, arguments))
    }
  }), w.extend(w.prototype, {
    chain: function() {
      return this._chain = !0, this
    },
    value: function() {
      return this._wrapped
    }
  })
}).call(this);

// AmplifyJS 1.1.0
// http://amplifyjs.com
// Copyright 2011 appendTo LLC., Dual licensed under the MIT or GPL licenses. http://appendto.com/open-source-licenses
(function(a, b) {
  var c = [].slice,
    d = {}, e = a.amplify = {
      publish: function(a) {
        var b = c.call(arguments, 1),
          e, f, g, h = 0,
          i;
        if (!d[a]) return !0;
        e = d[a].slice();
        for (g = e.length; h < g; h++) {
          f = e[h], i = f.callback.apply(f.context, b);
          if (i === !1) break
        }
        return i !== !1
      },
      subscribe: function(a, b, c, e) {
        arguments.length === 3 && typeof c == "number" && (e = c, c = b, b = null), arguments.length === 2 && (c = b, b = null), e = e || 10;
        var f = 0,
          g = a.split(/\s/),
          h = g.length,
          i;
        for (; f < h; f++) {
          a = g[f], i = !1, d[a] || (d[a] = []);
          var j = d[a].length - 1,
            k = {
              callback: c,
              context: b,
              priority: e
            };
          for (; j >= 0; j--)
            if (d[a][j].priority <= e) {
              d[a].splice(j + 1, 0, k), i = !0;
              break
            }
          i || d[a].unshift(k)
        }
        return c
      },
      unsubscribe: function(a, b) {
        if ( !! d[a]) {
          var c = d[a].length,
            e = 0;
          for (; e < c; e++)
            if (d[a][e].callback === b) {
              d[a].splice(e, 1);
              break
            }
        }
      }
    }
})(this),
function(a, b) {
  function e(a, e) {
    c.addType(a, function(f, g, h) {
      var i, j, k, l, m = g,
        n = (new Date).getTime();
      if (!f) {
        m = {}, l = [], k = 0;
        try {
          f = e.length;
          while (f = e.key(k++)) d.test(f) && (j = JSON.parse(e.getItem(f)), j.expires && j.expires <= n ? l.push(f) : m[f.replace(d, "")] = j.data);
          while (f = l.pop()) e.removeItem(f)
        } catch (o) {}
        return m
      }
      f = "__amplify__" + f;
      if (g === b) {
        i = e.getItem(f), j = i ? JSON.parse(i) : {
          expires: -1
        };
        if (j.expires && j.expires <= n) e.removeItem(f);
        else return j.data
      } else if (g === null) e.removeItem(f);
      else {
        j = JSON.stringify({
          data: g,
          expires: h.expires ? n + h.expires : null
        });
        try {
          e.setItem(f, j)
        } catch (o) {
          c[a]();
          try {
            e.setItem(f, j)
          } catch (o) {
            throw c.error()
          }
        }
      }
      return m
    })
  }
  var c = a.store = function(a, b, d, e) {
    var e = c.type;
    d && d.type && d.type in c.types && (e = d.type);
    return c.types[e](a, b, d || {})
  };
  c.types = {}, c.type = null, c.addType = function(a, b) {
    c.type || (c.type = a), c.types[a] = b, c[a] = function(b, d, e) {
      e = e || {}, e.type = a;
      return c(b, d, e)
    }
  }, c.error = function() {
    return "amplify.store quota exceeded"
  };
  var d = /^__amplify__/;
  for (var f in {
    localStorage: 1,
    sessionStorage: 1
  }) try {
    window[f].getItem && e(f, window[f])
  } catch (g) {}
  if (window.globalStorage) try {
    e("globalStorage", window.globalStorage[window.location.hostname]), c.type === "sessionStorage" && (c.type = "globalStorage")
  } catch (g) {}(function() {
    if (!c.types.localStorage) {
      var a = document.createElement("div"),
        d = "amplify";
      a.style.display = "none", document.getElementsByTagName("head")[0].appendChild(a);
      try {
        a.addBehavior("#default#userdata"), a.load(d)
      } catch (e) {
        a.parentNode.removeChild(a);
        return
      }
      c.addType("userData", function(e, f, g) {
        a.load(d);
        var h, i, j, k, l, m = f,
          n = (new Date).getTime();
        if (!e) {
          m = {}, l = [], k = 0;
          while (h = a.XMLDocument.documentElement.attributes[k++]) i = JSON.parse(h.value), i.expires && i.expires <= n ? l.push(h.name) : m[h.name] = i.data;
          while (e = l.pop()) a.removeAttribute(e);
          a.save(d);
          return m
        }
        e = e.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g, "-");
        if (f === b) {
          h = a.getAttribute(e), i = h ? JSON.parse(h) : {
            expires: -1
          };
          if (i.expires && i.expires <= n) a.removeAttribute(e);
          else return i.data
        } else f === null ? a.removeAttribute(e) : (j = a.getAttribute(e), i = JSON.stringify({
          data: f,
          expires: g.expires ? n + g.expires : null
        }), a.setAttribute(e, i));
        try {
          a.save(d)
        } catch (o) {
          j === null ? a.removeAttribute(e) : a.setAttribute(e, j), c.userData();
          try {
            a.setAttribute(e, i), a.save(d)
          } catch (o) {
            j === null ? a.removeAttribute(e) : a.setAttribute(e, j);
            throw c.error()
          }
        }
        return m
      })
    }
  })(),
  function() {
    function e(a) {
      return a === b ? b : JSON.parse(JSON.stringify(a))
    }
    var a = {}, d = {};
    c.addType("memory", function(c, f, g) {
      if (!c) return e(a);
      if (f === b) return e(a[c]);
      d[c] && (clearTimeout(d[c]), delete d[c]);
      if (f === null) {
        delete a[c];
        return null
      }
      a[c] = f, g.expires && (d[c] = setTimeout(function() {
        delete a[c], delete d[c]
      }, g.expires));
      return f
    })
  }()
}(this.amplify = this.amplify || {}),
function(a, b) {
  function e(a) {
    var b = !1;
    setTimeout(function() {
      b = !0
    }, 1);
    return function() {
      var c = this,
        d = arguments;
      b ? a.apply(c, d) : setTimeout(function() {
        a.apply(c, d)
      }, 1)
    }
  }

  function d(a) {
    return {}.toString.call(a) === "[object Function]"
  }

  function c() {}
  a.request = function(b, f, g) {
    var h = b || {};
    typeof h == "string" && (d(f) && (g = f, f = {}), h = {
      resourceId: b,
      data: f || {},
      success: g
    });
    var i = {
      abort: c
    }, j = a.request.resources[h.resourceId],
      k = h.success || c,
      l = h.error || c;
    h.success = e(function(b, c) {
      c = c || "success", a.publish("request.success", h, b, c), a.publish("request.complete", h, b, c), k(b, c)
    }), h.error = e(function(b, c) {
      c = c || "error", a.publish("request.error", h, b, c), a.publish("request.complete", h, b, c), l(b, c)
    });
    if (!j) {
      if (!h.resourceId) throw "amplify.request: no resourceId provided";
      throw "amplify.request: unknown resourceId: " + h.resourceId
    }
    if (!a.publish("request.before", h)) h.error(null, "abort");
    else {
      a.request.resources[h.resourceId](h, i);
      return i
    }
  }, a.request.types = {}, a.request.resources = {}, a.request.define = function(b, c, d) {
    if (typeof c == "string") {
      if (!(c in a.request.types)) throw "amplify.request.define: unknown type: " + c;
      d.resourceId = b, a.request.resources[b] = a.request.types[c](d)
    } else a.request.resources[b] = c
  }
}(amplify),
function(a, b, c) {
  var d = ["status", "statusText", "responseText", "responseXML", "readyState"],
    e = /\{([^\}]+)\}/g;
  a.request.types.ajax = function(e) {
    e = b.extend({
      type: "GET"
    }, e);
    return function(f, g) {
      function n(a, e) {
        b.each(d, function(a, b) {
          try {
            m[b] = h[b]
          } catch (c) {}
        }), /OK$/.test(m.statusText) && (m.statusText = "success"), a === c && (a = null), l && (e = "abort"), /timeout|error|abort/.test(e) ? m.error(a, e) : m.success(a, e), n = b.noop
      }
      var h, i = e.url,
        j = g.abort,
        k = b.extend(!0, {}, e, {
          data: f.data
        }),
        l = !1,
        m = {
          readyState: 0,
          setRequestHeader: function(a, b) {
            return h.setRequestHeader(a, b)
          },
          getAllResponseHeaders: function() {
            return h.getAllResponseHeaders()
          },
          getResponseHeader: function(a) {
            return h.getResponseHeader(a)
          },
          overrideMimeType: function(a) {
            return h.overrideMideType(a)
          },
          abort: function() {
            l = !0;
            try {
              h.abort()
            } catch (a) {}
            n(null, "abort")
          },
          success: function(a, b) {
            f.success(a, b)
          },
          error: function(a, b) {
            f.error(a, b)
          }
        };
      a.publish("request.ajax.preprocess", e, f, k, m), b.extend(k, {
        success: function(a, b) {
          n(a, b)
        },
        error: function(a, b) {
          n(null, b)
        },
        beforeSend: function(b, c) {
          h = b, k = c;
          var d = e.beforeSend ? e.beforeSend.call(this, m, k) : !0;
          return d && a.publish("request.before.ajax", e, f, k, m)
        }
      }), b.ajax(k), g.abort = function() {
        m.abort(), j.call(this)
      }
    }
  }, a.subscribe("request.ajax.preprocess", function(a, c, d) {
    var f = [],
      g = d.data;
    typeof g != "string" && (g = b.extend(!0, {}, a.data, g), d.url = d.url.replace(e, function(a, b) {
      if (b in g) {
        f.push(b);
        return g[b]
      }
    }), b.each(f, function(a, b) {
      delete g[b]
    }), d.data = g)
  }), a.subscribe("request.ajax.preprocess", function(a, c, d) {
    var e = d.data,
      f = a.dataMap; !! f && typeof e != "string" && (b.isFunction(f) ? d.data = f(e) : (b.each(a.dataMap, function(a, b) {
        a in e && (e[b] = e[a], delete e[a])
      }), d.data = e))
  });
  var f = a.request.cache = {
    _key: function(a, b, c) {
      function g() {
        return c.charCodeAt(e++) << 24 | c.charCodeAt(e++) << 16 | c.charCodeAt(e++) << 8 | c.charCodeAt(e++) << 0
      }
      c = b + c;
      var d = c.length,
        e = 0,
        f = g();
      while (e < d) f ^= g();
      return "request-" + a + "-" + f
    },
    _default: function() {
      var a = {};
      return function(b, c, d, e) {
        var g = f._key(c.resourceId, d.url, d.data),
          h = b.cache;
        if (g in a) {
          e.success(a[g]);
          return !1
        }
        var i = e.success;
        e.success = function(b) {
          a[g] = b, typeof h == "number" && setTimeout(function() {
            delete a[g]
          }, h), i.apply(this, arguments)
        }
      }
    }()
  };
  a.store && (b.each(a.store.types, function(b) {
    f[b] = function(c, d, e, g) {
      var h = f._key(d.resourceId, e.url, e.data),
        i = a.store[b](h);
      if (i) {
        e.success(i);
        return !1
      }
      var j = g.success;
      g.success = function(d) {
        a.store[b](h, d, {
          expires: c.cache.expires
        }), j.apply(this, arguments)
      }
    }
  }), f.persist = f[a.store.type]), a.subscribe("request.before.ajax", function(a) {
    var b = a.cache;
    if (b) {
      b = b.type || b;
      return f[b in f ? b : "_default"].apply(this, arguments)
    }
  }), a.request.decoders = {
    jsend: function(a, b, c, d, e) {
      a.status === "success" ? d(a.data) : a.status === "fail" ? e(a.data, "fail") : a.status === "error" && (delete a.status, e(a, "error"))
    }
  }, a.subscribe("request.before.ajax", function(c, d, e, f) {
    function k(a, b) {
      h(a, b)
    }

    function j(a, b) {
      g(a, b)
    }
    var g = f.success,
      h = f.error,
      i = b.isFunction(c.decoder) ? c.decoder : c.decoder in a.request.decoders ? a.request.decoders[c.decoder] : a.request.decoders._default;
    !i || (f.success = function(a, b) {
      i(a, b, f, j, k)
    }, f.error = function(a, b) {
      i(a, b, f, j, k)
    })
  })
}(amplify, jQuery);

// Mustache.js
// http://github.com/janl/mustache.js
// Copyright (c) 2012 Jan Lehnardt (JavaScript); MIT license
(function(t, l) {
  "object" === typeof exports && exports ? module.exports = l : "function" === typeof define && define.amd ? define(l) : t.Mustache = l
})(this, function() {
  function t(a) {
    return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
  }

  function l(a) {
    this.tail = this.string = a;
    this.pos = 0
  }

  function j(a, b) {
    this.view = a;
    this.parent = b;
    this._cache = {}
  }

  function m() {
    this.clearCache()
  }

  function r(a, b, c, f) {
    for (var d = "", g, e, l = 0, j = a.length; l < j; ++l) switch (g = a[l], e = g[1], g[0]) {
      case "#":
        e = c.lookup(e);
        if ("object" === typeof e)
          if (v(e))
            for (var n =
              0, h = e.length; n < h; ++n) d += r(g[4], b, c.push(e[n]), f);
          else e && (d += r(g[4], b, c.push(e), f));
          else "function" === typeof e ? (g = null == f ? null : f.slice(g[3], g[5]), e = e.call(c.view, g, function(a) {
            return b.render(a, c)
          }), null != e && (d += e)) : e && (d += r(g[4], b, c, f));
        break;
      case "^":
        e = c.lookup(e);
        if (!e || v(e) && 0 === e.length) d += r(g[4], b, c, f);
        break;
      case ">":
        e = b.getPartial(e);
        "function" === typeof e && (d += e(c));
        break;
      case "&":
        e = c.lookup(e);
        null != e && (d += e);
        break;
      case "name":
        e = c.lookup(e);
        null != e && (d += k.escape(e));
        break;
      case "text":
        d += e
    }
    return d
  }

  function w(a) {
    return [RegExp(t(a[0]) + "\\s*"), RegExp("\\s*" + t(a[1]))]
  }
  var k = {
    name: "mustache.js",
    version: "0.7.2",
    tags: ["{{", "}}"]
  };
  k.Scanner = l;
  k.Context = j;
  k.Writer = m;
  var z = /\s*/,
    x = /\s+/,
    A = /\S/,
    y = /\s*=/,
    B = /\s*\}/,
    C = /#|\^|\/|>|\{|&|=|!/,
    D = RegExp.prototype.test,
    E = Object.prototype.toString,
    v = Array.isArray || function(a) {
      return "[object Array]" === E.call(a)
    }, F = {
      "&": "&amp;",
      "<": "&lt;",
      ">": "&gt;",
      '"': "&quot;",
      "'": "&#39;",
      "/": "&#x2F;"
    };
  k.escape = function(a) {
    return String(a).replace(/[&<>"'\/]/g, function(a) {
      return F[a]
    })
  };
  l.prototype.eos = function() {
    return "" === this.tail
  };
  l.prototype.scan = function(a) {
    return (a = this.tail.match(a)) && 0 === a.index ? (this.tail = this.tail.substring(a[0].length), this.pos += a[0].length, a[0]) : ""
  };
  l.prototype.scanUntil = function(a) {
    var b = this.tail.search(a);
    switch (b) {
      case -1:
        a = this.tail;
        this.pos += this.tail.length;
        this.tail = "";
        break;
      case 0:
        a = "";
        break;
      default:
        a = this.tail.substring(0, b), this.tail = this.tail.substring(b), this.pos += b
    }
    return a
  };
  j.make = function(a) {
    return a instanceof j ? a : new j(a)
  };
  j.prototype.push =
    function(a) {
      return new j(a, this)
  };
  j.prototype.lookup = function(a) {
    var b = this._cache[a];
    if (!b) {
      if ("." == a) b = this.view;
      else
        for (var c = this; c;) {
          if (0 < a.indexOf("."))
            for (var b = c.view, f = a.split("."), d = 0; b && d < f.length;) b = b[f[d++]];
          else b = c.view[a]; if (null != b) break;
          c = c.parent
        }
      this._cache[a] = b
    }
    "function" === typeof b && (b = b.call(this.view));
    return b
  };
  m.prototype.clearCache = function() {
    this._cache = {};
    this._partialCache = {}
  };
  m.prototype.compile = function(a, b) {
    var c = this._cache[a];
    c || (c = k.parse(a, b), c = this._cache[a] =
      this.compileTokens(c, a));
    return c
  };
  m.prototype.compilePartial = function(a, b, c) {
    b = this.compile(b, c);
    return this._partialCache[a] = b
  };
  m.prototype.getPartial = function(a) {
    !(a in this._partialCache) && this._loadPartial && this.compilePartial(a, this._loadPartial(a));
    return this._partialCache[a]
  };
  m.prototype.compileTokens = function(a, b) {
    var c = this;
    return function(f, d) {
      if (d)
        if ("function" === typeof d) c._loadPartial = d;
        else
          for (var g in d) c.compilePartial(g, d[g]);
      return r(a, c, j.make(f), b)
    }
  };
  m.prototype.render = function(a,
    b, c) {
    return this.compile(a)(b, c)
  };
  k.parse = function(a, b) {
    a = a || "";
    b = b || k.tags;
    "string" === typeof b && (b = b.split(x));
    if (2 !== b.length) throw Error("Invalid tags: " + b.join(", "));
    for (var c = w(b), f = new l(a), d = [], g = [], e = [], j = !1, m = !1, n, h, p, s; !f.eos();) {
      n = f.pos;
      if (p = f.scanUntil(c[0])) {
        s = 0;
        for (var r = p.length; s < r; ++s)
          if (h = p.charAt(s), D.call(A, h) ? m = !0 : e.push(g.length), g.push(["text", h, n, n + 1]), n += 1, "\n" == h) {
            if (j && !m)
              for (; e.length;) delete g[e.pop()];
            else e = [];
            m = j = !1
          }
      }
      if (!f.scan(c[0])) break;
      j = !0;
      h = f.scan(C) || "name";
      f.scan(z);
      "=" === h ? (p = f.scanUntil(y), f.scan(y), f.scanUntil(c[1])) : "{" === h ? (p = f.scanUntil(RegExp("\\s*" + t("}" + b[1]))), f.scan(B), f.scanUntil(c[1]), h = "&") : p = f.scanUntil(c[1]);
      if (!f.scan(c[1])) throw Error("Unclosed tag at " + f.pos);
      s = [h, p, n, f.pos];
      g.push(s);
      if ("#" === h || "^" === h) d.push(s);
      else if ("/" === h) {
        if (0 === d.length) throw Error('Unopened section "' + p + '" at ' + n);
        h = d.pop();
        if (h[1] !== p) throw Error('Unclosed section "' + h[1] + '" at ' + n);
      } else if ("name" === h || "{" === h || "&" === h) m = !0;
      else if ("=" === h) {
        b = p.split(x);
        if (2 !== b.length) throw Error("Invalid tags at " + n + ": " + b.join(", "));
        c = w(b)
      }
    }
    if (h = d.pop()) throw Error('Unclosed section "' + h[1] + '" at ' + f.pos);
    for (var c = g, f = [], q, g = 0, e = c.length; g < e; ++g)
      if (d = c[g]) "text" === d[0] && q && "text" === q[0] ? (q[1] += d[1], q[3] = d[3]) : (q = d, f.push(d));
    q = f;
    f = c = [];
    d = [];
    e = 0;
    for (j = q.length; e < j; ++e) switch (g = q[e], g[0]) {
      case "#":
      case "^":
        d.push(g);
        f.push(g);
        f = g[4] = [];
        break;
      case "/":
        d.pop()[5] = g[2];
        f = 0 < d.length ? d[d.length - 1][4] : c;
        break;
      default:
        f.push(g)
    }
    return c
  };
  var u = new m;
  k.clearCache = function() {
    return u.clearCache()
  };
  k.compile = function(a, b) {
    return u.compile(a, b)
  };
  k.compilePartial = function(a, b, c) {
    return u.compilePartial(a, b, c)
  };
  k.compileTokens = function(a, b) {
    return u.compileTokens(a, b)
  };
  k.render = function(a, b, c) {
    return u.render(a, b, c)
  };
  k.to_html = function(a, b, c, f) {
    a = k.render(a, b, c);
    if ("function" === typeof f) f(a);
    else return a
  };
  return k
}());

// XDate v0.y
// http://arshaw.com/xdate/
// Dual-licensed under MIT or GPL
var XDate = function(g, p, C, r) {
  function f() {
    var a = this instanceof f ? this : new f,
      c = arguments,
      b = c.length,
      d;
    "boolean" == typeof c[b - 1] && (d = c[--b], c = t(c, 0, b));
    if (b)
      if (1 == b)
        if (b = c[0], b instanceof g || "number" == typeof b) a[0] = new g(+b);
        else
    if (b instanceof f) {
      var c = a,
        h = new g(+b[0]);
      n(b) && (h.toString = y);
      c[0] = h
    } else {
      if ("string" == typeof b) {
        a[0] = new g(0);
        a: {
          for (var c = b, b = d || !1, h = f.parsers, s = 0, e; s < h.length; s++)
            if (e = h[s](c, b, a)) {
              a = e;
              break a
            }
          a[0] = new g(c)
        }
      }
    } else a[0] = new g(k.apply(g, c)), d || (a[0] = u(a[0]));
    else a[0] = new g;
    "boolean" == typeof d && D(a, d);
    return a
  }

  function n(a) {
    return a[0].toString === y
  }

  function D(a, c, b) {
    c ? n(a) || (b && (a[0] = new g(k(a[0].getFullYear(), a[0].getMonth(), a[0].getDate(), a[0].getHours(), a[0].getMinutes(), a[0].getSeconds(), a[0].getMilliseconds()))), a[0].toString = y) : n(a) && (a[0] = b ? u(a[0]) : new g(+a[0]));
    return a
  }

  function E(a, c, b, d, h) {
    var e = l(m, a[0], h),
      a = l(F, a[0], h),
      h = 1 == c ? b % 12 : e(1),
      f = !1;
    2 == d.length && "boolean" == typeof d[1] && (f = d[1], d = [b]);
    a(c, d);
    f && e(1) != h && (a(1, [e(1) - 1]), a(2, [G(e(0), e(1))]))
  }

  function H(a,
    c, b, d) {
    var b = Number(b),
      h = p.floor(b);
    a["set" + q[c]](a["get" + q[c]]() + h, d || !1);
    h != b && 6 > c && H(a, c + 1, (b - h) * I[c], d)
  }

  function J(a, c, b) {
    var a = a.clone().setUTCMode(!0, !0),
      c = f(c).setUTCMode(!0, !0),
      d = 0;
    if (0 == b || 1 == b) {
      for (var h = 6; h >= b; h--) d /= I[h], d += m(c, !1, h) - m(a, !1, h);
      1 == b && (d += 12 * (c.getFullYear() - a.getFullYear()))
    } else 2 == b ? (b = a.toDate().setUTCHours(0, 0, 0, 0), d = c.toDate().setUTCHours(0, 0, 0, 0), d = p.round((d - b) / 864E5) + (c - d - (a - b)) / 864E5) : d = (c - a) / [36E5, 6E4, 1E3, 1][b - 3];
    return d
  }

  function v(a) {
    var c = a(0),
      b = a(1),
      a = a(2),
      b = new g(k(c, b, a)),
      d = w(c),
      a = d;
    b < d ? a = w(c - 1) : (c = w(c + 1), b >= c && (a = c));
    return p.floor(p.round((b - a) / 864E5) / 7) + 1
  }

  function w(a) {
    a = new g(k(a, 0, 4));
    a.setUTCDate(a.getUTCDate() - (a.getUTCDay() + 6) % 7);
    return a
  }

  function K(a, c, b, d) {
    var h = l(m, a, d),
      e = l(F, a, d),
      b = w(b === r ? h(0) : b);
    d || (b = u(b));
    a.setTime(+b);
    e(2, [h(2) + 7 * (c - 1)])
  }

  function L(a, c, b, d, e) {
    var s = f.locales,
      g = s[f.defaultLocale] || {}, j = l(m, a, e),
      b = ("string" == typeof b ? s[b] : b) || {};
    return z(a, c, function(a) {
        if (d)
          for (var b = (7 == a ? 2 : a) - 1; 0 <= b; b--) d.push(j(b));
        return j(a)
      },
      function(a) {
        return b[a] || g[a]
      }, e)
  }

  function z(a, c, b, d, e) {
    for (var f, g, j = ""; f = c.match(O);) {
      j += c.substr(0, f.index);
      if (f[1]) {
        g = j;
        for (var j = a, i = f[1], m = b, n = d, p = e, k = i.length, l = void 0, q = ""; 0 < k;) l = P(j, i.substr(0, k), m, n, p), l !== r ? (q += l, i = i.substr(k), k = i.length) : k--;
        j = g + (q + i)
      } else f[3] ? (g = z(a, f[4], b, d, e), parseInt(g.replace(/\D/g, ""), 10) && (j += g)) : j += f[7] || "'";
      c = c.substr(f.index + f[0].length)
    }
    return j + c
  }

  function P(a, c, b, d, e) {
    var g = f.formatters[c];
    if ("string" == typeof g) return z(a, g, b, d, e);
    if ("function" == typeof g) return g(a,
      e || !1, d);
    switch (c) {
      case "fff":
        return i(b(6), 3);
      case "s":
        return b(5);
      case "ss":
        return i(b(5));
      case "m":
        return b(4);
      case "mm":
        return i(b(4));
      case "h":
        return b(3) % 12 || 12;
      case "hh":
        return i(b(3) % 12 || 12);
      case "H":
        return b(3);
      case "HH":
        return i(b(3));
      case "d":
        return b(2);
      case "dd":
        return i(b(2));
      case "ddd":
        return d("dayNamesShort")[b(7)] || "";
      case "dddd":
        return d("dayNames")[b(7)] || "";
      case "M":
        return b(1) + 1;
      case "MM":
        return i(b(1) + 1);
      case "MMM":
        return d("monthNamesShort")[b(1)] || "";
      case "MMMM":
        return d("monthNames")[b(1)] ||
          "";
      case "yy":
        return (b(0) + "").substring(2);
      case "yyyy":
        return b(0);
      case "t":
        return x(b, d).substr(0, 1).toLowerCase();
      case "tt":
        return x(b, d).toLowerCase();
      case "T":
        return x(b, d).substr(0, 1);
      case "TT":
        return x(b, d);
      case "z":
      case "zz":
      case "zzz":
        return e ? c = "Z" : (d = a.getTimezoneOffset(), a = 0 > d ? "+" : "-", b = p.floor(p.abs(d) / 60), d = p.abs(d) % 60, e = b, "zz" == c ? e = i(b) : "zzz" == c && (e = i(b) + ":" + i(d)), c = a + e), c;
      case "w":
        return v(b);
      case "ww":
        return i(v(b));
      case "S":
        return c = b(2), 10 < c && 20 > c ? "th" : ["st", "nd", "rd"][c % 10 - 1] || "th"
    }
  }

  function x(a, c) {
    return 12 > a(3) ? c("amDesignator") : c("pmDesignator")
  }

  function A(a) {
    return !isNaN(+a[0])
  }

  function m(a, c, b) {
    return a["get" + (c ? "UTC" : "") + q[b]]()
  }

  function F(a, c, b, d) {
    a["set" + (c ? "UTC" : "") + q[b]].apply(a, d)
  }

  function u(a) {
    return new g(a.getUTCFullYear(), a.getUTCMonth(), a.getUTCDate(), a.getUTCHours(), a.getUTCMinutes(), a.getUTCSeconds(), a.getUTCMilliseconds())
  }

  function G(a, c) {
    return 32 - (new g(k(a, c, 32))).getUTCDate()
  }

  function B(a) {
    return function() {
      return a.apply(r, [this].concat(t(arguments)))
    }
  }

  function l(a) {
    var c = t(arguments, 1);
    return function() {
      return a.apply(r, c.concat(t(arguments)))
    }
  }

  function t(a, c, b) {
    return C.prototype.slice.call(a, c || 0, b === r ? a.length : b)
  }

  function M(a, c) {
    for (var b = 0; b < a.length; b++) c(a[b], b)
  }

  function i(a, c) {
    c = c || 2;
    for (a += ""; a.length < c;) a = "0" + a;
    return a
  }
  var q = "FullYear Month Date Hours Minutes Seconds Milliseconds Day Year".split(" "),
    N = ["Years", "Months", "Days"],
    I = [12, 31, 24, 60, 60, 1E3, 1],
    O = /(([a-zA-Z])\2*)|(\((('.*?'|\(.*?\)|.)*?)\))|('(.*?)')/,
    k = g.UTC,
    y = g.prototype.toUTCString,
    e = f.prototype;
  e.length = 1;
  e.splice = C.prototype.splice;
  e.getUTCMode = B(n);
  e.setUTCMode = B(D);
  e.getTimezoneOffset = function() {
    return n(this) ? 0 : this[0].getTimezoneOffset()
  };
  M(q, function(a, c) {
    e["get" + a] = function() {
      return m(this[0], n(this), c)
    };
    8 != c && (e["getUTC" + a] = function() {
      return m(this[0], !0, c)
    });
    7 != c && (e["set" + a] = function(a) {
      E(this, c, a, arguments, n(this));
      return this
    }, 8 != c && (e["setUTC" + a] = function(a) {
      E(this, c, a, arguments, !0);
      return this
    }, e["add" + (N[c] || a)] = function(a, d) {
      H(this, c, a, d);
      return this
    }, e["diff" +
      (N[c] || a)] = function(a) {
      return J(this, a, c)
    }))
  });
  e.getWeek = function() {
    return v(l(m, this, !1))
  };
  e.getUTCWeek = function() {
    return v(l(m, this, !0))
  };
  e.setWeek = function(a, c) {
    K(this, a, c, !1);
    return this
  };
  e.setUTCWeek = function(a, c) {
    K(this, a, c, !0);
    return this
  };
  e.addWeeks = function(a) {
    return this.addDays(7 * Number(a))
  };
  e.diffWeeks = function(a) {
    return J(this, a, 2) / 7
  };
  f.parsers = [
    function(a, c, b) {
      if (a = a.match(/^(\d{4})(-(\d{2})(-(\d{2})([T ](\d{2}):(\d{2})(:(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/)) {
        var d =
          new g(k(a[1], a[3] ? a[3] - 1 : 0, a[5] || 1, a[7] || 0, a[8] || 0, a[10] || 0, a[12] ? 1E3 * Number("0." + a[12]) : 0));
        a[13] ? a[14] && d.setUTCMinutes(d.getUTCMinutes() + ("-" == a[15] ? 1 : -1) * (60 * Number(a[16]) + (a[18] ? Number(a[18]) : 0))) : c || (d = u(d));
        return b.setTime(+d)
      }
    }
  ];
  f.parse = function(a) {
    return +f("" + a)
  };
  e.toString = function(a, c, b) {
    return a === r || !A(this) ? this[0].toString() : L(this, a, c, b, n(this))
  };
  e.toUTCString = e.toGMTString = function(a, c, b) {
    return a === r || !A(this) ? this[0].toUTCString() : L(this, a, c, b, !0)
  };
  e.toISOString = function() {
    return this.toUTCString("yyyy-MM-dd'T'HH:mm:ss(.fff)zzz")
  };
  f.defaultLocale = "";
  f.locales = {
    "": {
      monthNames: "January February March April May June July August September October November December".split(" "),
      monthNamesShort: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
      dayNames: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
      dayNamesShort: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
      amDesignator: "AM",
      pmDesignator: "PM"
    }
  };
  f.formatters = {
    i: "yyyy-MM-dd'T'HH:mm:ss(.fff)",
    u: "yyyy-MM-dd'T'HH:mm:ss(.fff)zzz"
  };
  M("getTime valueOf toDateString toTimeString toLocaleString toLocaleDateString toLocaleTimeString toJSON".split(" "),
    function(a) {
      e[a] = function() {
        return this[0][a]()
      }
    });
  e.setTime = function(a) {
    this[0].setTime(a);
    return this
  };
  e.valid = B(A);
  e.clone = function() {
    return new f(this)
  };
  e.clearTime = function() {
    return this.setHours(0, 0, 0, 0)
  };
  e.toDate = function() {
    return new g(+this[0])
  };
  f.now = function() {
    return +new g
  };
  f.today = function() {
    return (new f).clearTime()
  };
  f.UTC = k;
  f.getDaysInMonth = G;
  "undefined" !== typeof module && module.exports && (module.exports = f);
  return f
}(Date, Math, Array);